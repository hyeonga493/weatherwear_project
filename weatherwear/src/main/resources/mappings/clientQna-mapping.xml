<?xml version="1.0" encoding="UTF-8"?>

<!-- MyBatis 다운 파일 PDF 에서 붙여넣은 내용입니다. -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
				"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
				
<!-- mapper를 루트 엘리먼트로 사용합니다. -->
<mapper namespace="QnaDAO">
	
	<resultMap type="clientQna" id="clientQnaResult">
		<id property="qnaId" column="qId"/>
		<result property="clientId" column="cId"/>
		<result property="qnaTitle" column="qTitle"/> 
		<result property="qnaContent" column="qContent"/> 
		<result property="qnaImage" column="qImage"/> 
		<result property="qnaDate" column="qDate"/> 
		<result property="qnaSecCheck" column="qSecCheck"/> 
		<result property="qnaSecPwd" column="qSecPwd"/>
		<result property="qnaStatus" column="qStatus"/> 
		<result property="qnaAnswer" column="qAnswer"/> 
		<result property="qnaDate" column="qaDate"/> 
		<result property="qnaType" column="qnaType"/> 
		<result property="qnaSelectType" column="qnaSelectType"/> 
		<result property="qnaKeyword" column="qnaKeyword"/> 
	</resultMap>
	 
 	<insert id="writeQna" parameterType="clientQna">
        INSERT INTO qna (qId, qTitle, qContent, cId, qnaType) 
        VALUES("Qna_02", #{ qnaTitle }, #{ qnaContent }, "client03", #{ qnaType });
    </insert>

<!--데이터 수정  -->
    <update id="updateQna" parameterType="clientQna">
        UPDATE qna
        SET qId=#{ qnaId }, qTitle=#{ qnaTitle }, qContent=#{ qnaContent }
        WHERE qId=#{ qnaId }
    </update>

<!-- 데이터 삭제   -->
    <delete id="deleteQna" parameterType="clientQna">
        DELETE FROM qna
        WHERE qId=#{ qnaId }
    </delete>

<!-- 데이터 조회  -->
    <select id="qnaDetail" resultMap="clientQnaResult" parameterType="clientQna">
        SELECT * FROM qna
        WHERE qId=#{ qnaId }
    </select> 

 
<!-- 데이터 목록 조회 resultType으로 작성해도 됩니다.-->
    <select id="getQnaList" resultMap="clientQnaResult" parameterType="clientQna">
        SELECT * FROM qna
        WHERE 1=1
        <if test="qnaSelectType=='subject'">
			AND qTitle LIKE CONCAT('%', #{qnaKeyword}, '%')
		</if>
		<if test="qnaSelectType=='content'">
			AND qContent LIKE CONCAT('%', #{qnaKeyword}, '%')
		</if> 
    </select>
    
</mapper>